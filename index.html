<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vox AI Studio - Professional Documentary TTS</title>
    <style>
        :root { --bg: #050505; --card: #0f0f0f; --accent: #ffffff; --premium: #d4af37; }
        body { background-color: var(--bg); color: white; font-family: 'Inter', sans-serif; margin: 0; padding: 10px; }

        header { display: flex; justify-content: space-between; align-items: center; padding: 15px 25px; border-bottom: 1px solid #222; }
        .logo-box { display: flex; align-items: center; gap: 10px; }
        .logo-icon { width: 32px; height: 32px; background: white; border-radius: 8px; display: flex; align-items: center; justify-content: center; }
        .logo-text { font-size: 20px; font-weight: 900; }

        .nav-tabs { display: flex; justify-content: center; gap: 10px; margin: 20px 0; }
        .tab-btn { background: #1a1a1a; color: #888; border: none; padding: 12px 20px; border-radius: 12px; cursor: pointer; }
        .tab-btn.active { background: #333; color: white; }

        .editor-container { max-width: 500px; margin: 0 auto; background: var(--card); border-radius: 28px; padding: 30px; border: 1px solid #222; }
        .voice-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin: 20px 0; }
        select, textarea { width: 100%; background: #1a1a1a; color: white; border: 1px solid #333; padding: 14px; border-radius: 12px; outline: none; }
        textarea { height: 250px; font-size: 16px; resize: none; margin-top: 15px; }

        .btn-main { width: 100%; padding: 18px; background: white; color: black; border-radius: 50px; border: none; font-weight: bold; font-size: 18px; cursor: pointer; margin-top: 15px; }
        .btn-main:disabled { background: #333; color: #777; cursor: not-allowed; }

        .upload-area { border: 2px dashed #333; padding: 40px; text-align: center; border-radius: 20px; margin-top: 15px; cursor: pointer; }
        .upload-area.error { border-color: #ff4444; }
    </style>
</head>
<body>

    <header>
        <div class="logo-box">
            <div class="logo-icon"><svg viewBox="0 0 24 24" width="20"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9V8h2v8zm4 0h-2V8h2v8z"/></svg></div>
            <div class="logo-text">Vox AI Studio</div>
        </div>
        <div style="display:flex; align-items:center; gap:15px;">
            <span style="color:var(--premium); font-weight:bold; font-size:12px;">CREDITS: 20,000</span>
        </div>
    </header>

    <div class="nav-tabs">
        <button class="tab-btn active" onclick="switchTab('tts', this)">Text to Speech</button>
        <button class="tab-btn" onclick="switchTab('dub', this)">AI Dubbing</button>
    </div>

    <div class="editor-container">
        <div id="tts-section">
            <div style="font-size: 11px; color: #555; font-weight: bold;">STUDIO QUALITY AI VOICES</div>
            <div class="voice-grid">
                <select id="male-select">
                    <option value="hi-IN-Neural2-C">Marcus (Deep Documentary)</option>
                    <option value="hi-IN-Studio-B">Frank (Realistic Story)</option>
                    <option value="hi-IN-Wavenet-B">Charlie (Natural)</option>
                    <option value="hi-IN-Neural2-A">Liam (Professional)</option>
                    <option value="hi-IN-Studio-C">George (Warm)</option>
                    <option value="hi-IN-Wavenet-C">Ethan (Action)</option>
                    <option value="hi-IN-Neural2-B">Noah (Young)</option>
                    <option value="hi-IN-Studio-A">Sam (Clear)</option>
                    <option value="hi-IN-Wavenet-D">Arthur (Grave)</option>
                    <option value="hi-IN-Neural2-D">Thomas (Smooth)</option>
                </select>
                <select id="female-select">
                    <option value="hi-IN-Neural2-F">Bella (Emotional)</option>
                    <option value="hi-IN-Studio-D">Glinda (High Quality)</option>
                    <option value="hi-IN-Wavenet-A">Dorothy (Soft)</option>
                    <option value="hi-IN-Neural2-E">Alice (Narrative)</option>
                    <option value="hi-IN-Studio-E">Mimi (Dramatic)</option>
                    <option value="hi-IN-Wavenet-E">Rachel (Anchor)</option>
                    <option value="hi-IN-Neural2-G">Lily (Crystal)</option>
                    <option value="hi-IN-Studio-F">Freya (Mystery)</option>
                    <option value="hi-IN-Wavenet-F">Grace (Calm)</option>
                    <option value="hi-IN-Neural2-H">Charlotte (Energy)</option>
                </select>
            </div>
            <textarea id="text-input" placeholder="Yahan apni kahani likhein..."></textarea>
            <button class="btn-main" onclick="generateVoice()">Generate Realistic Voice</button>
        </div>

        <div id="dub-section" style="display:none;">
            <div style="font-size: 11px; color: #555; font-weight: bold;">AI VIDEO DUBBING (MAX 50MB)</div>
            <select id="target-lang" style="margin-top:10px;">
                <option value="hi">Hindi</option><option value="en">English</option>
                <option value="bn">Bengali</option><option value="mr">Marathi</option>
                <option value="ta">Tamil</option><option value="te">Telugu</option>
                <option value="gu">Gujarati</option><option value="kn">Kannada</option>
                <option value="ml">Malayalam</option><option value="es">Spanish</option>
                <option value="fr">French</option><option value="ja">Japanese</option>
                <option value="ru">Russian</option><option value="ar">Arabic</option>
                <option value="de">German</option>
            </select>

            <div class="upload-area" id="drop-zone" onclick="document.getElementById('file-input').click()">
                <input type="file" id="file-input" hidden onchange="validateAndUpload(this)" accept="video/*,audio/*">
                <div style="font-size: 40px;">ðŸ“‚</div>
                <div id="upload-text" style="font-weight:bold; margin-top:10px;">Click to Upload</div>
                <div style="font-size: 11px; color:#666;">Maximum allowed: 50MB</div>
            </div>
            <button class="btn-main" id="process-btn" disabled onclick="startProcessing()">Start Dubbing Now</button>
        </div>
    </div>

    <script>
        function switchTab(mode, btn) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById('tts-section').style.display = (mode === 'tts') ? 'block' : 'none';
            document.getElementById('dub-section').style.display = (mode === 'dub') ? 'block' : 'none';
        }

        // STRICT 50MB BLOCKING
        function validateAndUpload(input) {
            const file = input.files[0];
            const area = document.getElementById('drop-zone');
            const status = document.getElementById('upload-text');
            const btn = document.getElementById('process-btn');

            if (file) {
                if (file.size > 50 * 1024 * 1024) { // 50MB Check
                    alert("âš ï¸ Strict Block: File 50MB se badi hai! Upload allowed nahi hai.");
                    input.value = "";
                    area.classList.add('error');
                    status.innerText = "File Too Large (Rejected)";
                    btn.disabled = true;
                } else {
                    area.classList.remove('error');
                    status.innerText = "Selected: " + file.name;
                    btn.disabled = false; // Sirf tabhi button chalega jab file 50MB se chhoti ho
                }
            }
        }

        // REAL VOICE GENERATION (No Dummy Alerts)
        async function generateVoice() {
            const text = document.getElementById('text-input').value;
            const voice = document.getElementById('male-select').value; // Default to male for test
            const btn = document.querySelector('#tts-section .btn-main');

            if (!text.trim()) return alert("Pehle kuch likhein!");

            btn.innerText = "AI is Speaking...";
            btn.disabled = true;

            try {
                const response = await fetch('/.netlify/functions/tts', {
                    method: 'POST',
                    body: JSON.stringify({ text, voice })
                });
                const data = await response.json();
                
                if (data.audio) {
                    const audio = new Audio(`data:audio/mp3;base64,${data.audio}`);
                    audio.play();
                    btn.innerText = "âœ… Playing...";
                }
            } catch (e) {
                alert("Server Connection Failed! Check Netlify Key.");
            } finally {
                setTimeout(() => { btn.disabled = false; btn.innerText = "Generate Realistic Voice"; }, 3000);
            }
        }

        function startProcessing() {
            alert("Dubbing started! Processing your 50MB file...");
        }
    </script>
</body>
</html>
